<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
<title>ã˜ã‚ƒã‚“ã‘ã‚“</title>
</head>
<body>
<main>
  <div class="container">
    <h1>ã˜ã‚ƒã‚“ã‘ã‚“ã‚²ãƒ¼ãƒ </h1>
    <div id="game">
      <div id="choices">
        <button class="choice" id="ã‚°ãƒ¼">ã‚°ãƒ¼</button>
        <button class="choice" id="ãƒ‘ãƒ¼">ãƒ‘ãƒ¼</button>
        <button class="choice" id="ãƒãƒ§ã‚­">ãƒãƒ§ã‚­</button>
      </div>
      <div id="result">
        <p id="result-text">ã˜ã‚ƒã‚“ã‘ã‚“...</p>
      </div>
    </div>

    <div id="attimuitehoi">
      <div id="choices1">
        <button class="choice1" id="å·¦">ğŸ‘ˆ</button>
        <button class="choice1" id="ä¸Š">ğŸ‘†</button>
        <button class="choice1" id="å³">ğŸ‘‰</button>
        <button class="choice1" id="ä¸‹">ğŸ‘‡</button>
      </div>
      <div id = "result1">
        <p id = "result1-text">ã‚ã£ã¡ã‚€ã„ã¦ã»ã„ï¼</p>
      </div>
    </div>

    <div class="playtimes">
      <p>ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤å›æ•°</p>
      <p id="playtimes">0å›</p>
    </div>
    <div class="wintimes">
      <p>å‹ã£ãŸå›æ•°</p>
      <p id="wintimes">0å›</p>
    </div>
    <div class="winrate">
      <p>å‹ç‡</p>
      <p id="winrate">0%</p>
    </div>

    <div id="reset">
      <button class="reset" id="reset">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
  </div>
</main>

<footer></footer>
<script>
// ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
  let userChoice = "";
  let computerChoice = "";
  let userFaceChoice = "";
  let computerFaceChoice = "";
  let playtimes = 0;
  let wintimes = 0;
  let winningrate = 0;
  
  document.getElementById('attimuitehoi').style.display = 'none';

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸ã‚“ã æ‰‹ã‚’å–å¾—ã™ã‚‹é–¢æ•°
  function getUserChoice(choice) {
    userChoice = choice;
    playGame();
  }

  //ãƒ¦ãƒ¼ã‚¶ãŒé¸ã‚“ã ã‚ã£ã¡ã‚€ã„ã¦ã»ã„ã®å‘ãã‚’å–å¾—ã™ã‚‹é–¢æ•°
  function getUserfacechoice(choice){
    userFaceChoice = choice;
    playattimuitehoi();
  }

  // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®æ‰‹ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã¶é–¢æ•°
  function getComputerChoice() {
    const choices = ['ã‚°ãƒ¼', 'ãƒ‘ãƒ¼', 'ãƒãƒ§ã‚­'];
    const randomChoice = Math.floor(Math.random() * 3);
    return choices[randomChoice];
  }

  // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ã‚ã£ã¡ã‚€ã„ã¦ã»ã„ã®å‘ãã‚’é¸ã¶é–¢æ•°
  function getComputerFaceChoice() {
    const choices = ['å·¦','ä¸Š','å³','ä¸‹'];
    const randomChoice = Math.floor(Math.random() * 4);
    return choices[randomChoice];
  }

  // ã˜ã‚ƒã‚“ã‘ã‚“ã®ãƒ«ãƒ¼ãƒ«ã«åŸºã¥ã„ã¦çµæœã‚’æ±ºå®šã™ã‚‹é–¢æ•°
  function determineWinner(user, computer) {
    if (user === computer) {
      return 'draw';
    } else if ((user === 'ã‚°ãƒ¼' && computer === 'ãƒãƒ§ã‚­') ||
              (user === 'ãƒ‘ãƒ¼' && computer === 'ã‚°ãƒ¼') ||
              (user === 'ãƒãƒ§ã‚­' && computer === 'ãƒ‘ãƒ¼')) {
      return 'win';
    } else {
      return 'lose';
    }
  }

  //ã‚ã£ã¡ã‚€ã„ã¦ã»ã„ã®å‹æ•—åˆ¤å®š
  function decideWinner(userface, computerface) {
    if (userface === computerface && determineWinner(userChoice,computerChoice) === 'win') {
      return 'win';
    }else if(userface === computerface && determineWinner(userChoice,computerChoice) === 'lose') {
      return 'lose';
    } else {
      return 'draw';
    }
  }

  // ã˜ã‚ƒã‚“ã‘ã‚“ã‚²ãƒ¼ãƒ ã‚’ãƒ—ãƒ¬ã‚¤ã™ã‚‹é–¢æ•°
  function playGame() {
    computerChoice = getComputerChoice();
    const result = determineWinner(userChoice, computerChoice);
    if(result === 'draw'){
      document.getElementById('result-text').textContent = `ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®é¸ã‚“ã æ‰‹ã¯${computerChoice}ã§ã™ã€‚ã‚ã„ã“ãªã®ã§ã‚‚ã†1å›`;
    }else if(result === 'win'){
      document.getElementById('result-text').textContent = `ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®é¸ã‚“ã æ‰‹ã¯${computerChoice}ã§ã™ã€‚ã˜ã‚ƒã‚“ã‘ã‚“ã«å‹ã¡ã¾ã—ãŸã€‚ã‚ã£ã¡ã‚€ã„ã¦ã»ã„ã§ã ã™å‘ãã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚`;
    }else if(result === 'lose'){
      document.getElementById('result-text').textContent = `ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®é¸ã‚“ã æ‰‹ã¯${computerChoice}ã§ã™ã€‚ã˜ã‚ƒã‚“ã‘ã‚“ã«è² ã‘ã¾ã—ãŸã€‚ã‚ã£ã¡ã‚€ã„ã¦ã»ã„ã§ã ã™å‘ãã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚`;
    }
  }

  function playattimuitehoi() {
    computerFaceChoice = getComputerFaceChoice();
    const result = decideWinner(userFaceChoice,computerFaceChoice);
    if(result === 'win'){
      document.getElementById('result1-text').textContent = `ç›¸æ‰‹ã®å‡ºã—ãŸå‘ãã¯${computerFaceChoice}ã§ã™ã€‚ã‚ãªãŸã®å‹ã¡ã§ã™ï¼`;
      playtimes = playtimes + 1;
      wintimes = wintimes + 1;
    } else if(result === 'lose') {
      document.getElementById('result1-text').textContent = `ç›¸æ‰‹ã®å‡ºã—ãŸå‘ãã¯${computerFaceChoice}ã§ã™ã€‚ã‚ãªãŸã®è² ã‘ã§ã™ï¼`;
      playtimes = playtimes + 1;
    } else {
      document.getElementById('result1-text').textContent = `ç›¸æ‰‹ã®å‡ºã—ãŸå‘ãã¯${computerFaceChoice}ã§ã™ã€‚ã‚‚ã†ä¸€åº¦ã˜ã‚ƒã‚“ã‘ã‚“ã‚’ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„`;
      playtimes = playtimes;
    }
    document.getElementById('playtimes').textContent = `${playtimes}å›`;
    document.getElementById('wintimes').textContent = `${wintimes}å›`;
    document.getElementById('winrate').textContent = `${Math.round(wintimes/playtimes*100)}%`;
  }

  // ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ ã™ã‚‹
  document.getElementById('ã‚°ãƒ¼').addEventListener('click', function() {
    getUserChoice('ã‚°ãƒ¼');
    document.getElementById('attimuitehoi').style.display = 'block';
  });
  document.getElementById('ãƒ‘ãƒ¼').addEventListener('click', function() {
    getUserChoice('ãƒ‘ãƒ¼');
    document.getElementById('attimuitehoi').style.display = 'block';
  });
  document.getElementById('ãƒãƒ§ã‚­').addEventListener('click', function() {
    getUserChoice('ãƒãƒ§ã‚­');
    document.getElementById('attimuitehoi').style.display = 'block';
  });

  document.getElementById('å·¦').addEventListener('click',function() {
    getUserfacechoice('å·¦');
  });
  document.getElementById('ä¸Š').addEventListener('click',function() {
    getUserfacechoice('ä¸Š');
  });
  document.getElementById('å³').addEventListener('click',function() {
    getUserfacechoice('å³');
  });
  document.getElementById('ä¸‹').addEventListener('click',function() {
    getUserfacechoice('ä¸‹');
  });

  //ãƒªã‚»ãƒƒãƒˆãŒæŠ¼ã•ã‚ŒãŸæ™‚ã®å‡¦ç†
  document.getElementById('reset').addEventListener('click',function() {
    document.getElementById('attimuitehoi').style.display = 'none';
    document.getElementById('result-text').textContent = 'ã˜ã‚ƒã‚“ã‘ã‚“...'
    document.getElementById('result1-text').textContent = 'ã‚ã£ã¡ã‚€ã„ã¦ã»ã„ï¼'
  });

</script>
</body>
</html>
